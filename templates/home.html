{% extends 'base.html' %}
{% load static %}
{% block content %}

<div id="blogCarousel" class="carousel slide" data-bs-ride="carousel">
  <div class="carousel-inner">

    <!-- Slide 1 -->
    {% for post in featured_blogs %}
    <div class="carousel-item active">
      <div class="d-flex align-items-center" style="height: 400px;">
        <div class="jumbotron w-100 text-white rounded bg-dark d-flex align-items-center"
             style="background-image: url('{{ post.image.url }}'); background-blend-mode: overlay; background-size: cover; background-position: center; height: 100%;">
          <div class="container px-5">
            <h1 class="text-center display-4 font-italic">{{ post.title }}</h1>
            <p class="text-center lead my-3">{{ post.short_description }}</p>
            <p class="text-center lead mb-0"><a href="{% url 'post_detail' post.slug %}" class="text-white font-weight-bold">Continue reading...</a></p>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}

  </div>

  <!-- Controles -->
  <button class="carousel-control-prev" type="button" data-bs-target="#blogCarousel" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Anterior</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#blogCarousel" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Pr√≥ximo</span>
  </button>
</div>

<div class="row mb-2 mt-2">

  {% for blog in blogs_front %}
  {% if forloop.counter == 1 %}
  <div class="col-md-6 mt-2">
    <div class="card border-1">
      <div class="card-body d-flex align-items-start justify-content-between">
        <div>
          <span class="badge bg-primary mb-2">{{ blog.category }}</span>
          <a href="{% url 'post_detail' blog.slug %}" style="text-decoration:none;"><h3 class="text-info">{{ blog.title }}</h3></a>
          <small class="mb-1 text-muted">{{ blog.created_at | timesince }} ago | {{ blog.author }}</small>
          <p class="card-text mb-0">
            {{ blog.short_description|truncatewords:20 }}
          </p>
        </div>
        <img src="{{ blog.image.url }}"
             alt="Thumbnail"
             class="ms-2 img-fluid rounded-end img-front" style="max-width: 250px; max-height: 200px;">
      </div>
    </div>
  </div>
  {% endif %}
  {% endfor %}

  {% for blog in blogs_front %}
  {% if forloop.counter == 2 %}
  <div class="col-md-6 mt-2">
    <div class="card border-1">
      <div class="card-body d-flex align-items-start justify-content-between">
        <div>
          <span class="badge bg-primary mb-2">{{ blog.category }}</span>
          <a href="{% url 'post_detail' blog.slug %}" style="text-decoration:none;"><h3 class="text-info">{{ blog.title }}</h3></a>
          <small class="mb-1 text-muted"> {{ blog.created_at | timesince }} ago | {{ blog.author }} </small>
          <p class="card-text mb-0">
            {{ blog.short_description|truncatewords:20 }}
          </p>
        </div>
        <img src="{{ blog.image.url }}"
             alt="Thumbnail"
             class="ms-2 img-fluid rounded-end img-front" style="max-width: 250px; max-height: 200px; object-fit: cover;">
      </div>
    </div>
  </div>
  {% endif %}
  {% endfor %}
</div>
  <main role="main" class="container p-0">
    <div class="row">
      <div class="col-md-8 blog-main">
        <h3 class="fs-1 bg-info-emphasis pb-3 mb-4 mt-4 font-italic border-bottom">
          Recent Posts</h3>
        {% for post in blogs %}
        {% if forloop.counter >= 1 and forloop.counter <= 3 %}
        <div class="blog-post">
          <a href="{% url 'post_detail' post.slug %}" style="text-decoration:none;"><h2 class="fs-2 text-info blog-post-title">{{ post.title }}</h2></a>
          <p class="blog-post-meta">{{ post.created_at }} by <a href="" style="text-decoration: none;">{{ post.author }}</a></p>
          <img src="{{ post.image.url }}" alt="Post Image" class="shadow-lg bg-body-tertiary img-fluid mb-3 rounded" style="width: 50rem; height: 20rem;">
          <p class="mt-3">{{ post.short_description }}</p>
          <p>{{ post.blog_body | truncatewords:100 }}</p>
          <a class="btn btn-outline-info mb-2">More</a>
          <p><strong class="text-bg-dark p-1 rounded">Documentation:</strong><a href="{{ post.url_github }}" target="_blank" class="text-decoration-none"> {{ post.url_github }}</a></p>
        </div>
        {% endif %}
        {% endfor %}
        <!-- /.blog-post -->

      </div>
      <!-- /.blog-main -->

      <aside class="col-md-4 blog-sidebar mt-3">
        <div class="side-blog shadow p-3 mb-3 bg-light rounded">
          <h4 class="font-italic">About Us</h4>
          <p class="mb-0">Etiam porta <em>sem malesuada magna</em> mollis euismod. Cras mattis consectetur purus sit amet fermentum. Aenean lacinia bibendum nulla sed consectetur.</p>
          <a class="btn btn-dark mt-1" href="{% url 'about' %}">See More</a>
        </div>

        <div class="side-blog shadow p-3 bg-light rounded">
          <h4 class="font-italic">Follow Us</h4>
          <ol class="list-unstyled">
            <li><a href="#"><img width="50" height="50" src="https://img.icons8.com/ios-filled/50/github.png" alt="github"/>GitHub</a></li>
            <li><a href="#"><img width="48" height="48" src="https://img.icons8.com/fluency/48/linkedin.png" alt="linkedin"/>LinkedIn</a></li>
          </ol>
        </div>
      </aside><!-- /.blog-sidebar -->

    </div><!-- /.row -->

  </main><!-- /.container -->

</div>
{% endblock content %}